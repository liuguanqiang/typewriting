window.__require=function t(e,i,o){function n(a,c){if(!i[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var h="function"==typeof __require&&__require;if(!c&&h)return h(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){return n(e[a][1][t]||t)},l,l.exports,t,e,i,o)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({airplaneBoss:[function(t,e,i){"use strict";cc._RF.push(e,"2d9e5cYJqxH3L+2g/vimwS+","airplaneBoss"),cc.Class({extends:cc.Component,properties:{},start:function(){},onInit:function(t){this.baseJS=t,this._armatureDisPlay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature(),this.isTwo=!1},animationEventHandler:function(t){t.type,dragonBones.EventObject.COMPLETE},playEnter:function(){this._armatureDisPlay.playAnimation("\u55b7\u706b\u7130\u8fdb\u5165",0)},playAnimation:function(t,e){var i=this;this.stopAni=!1,this.state=e>.5?1:2,this.initAniIndex=0,t?(this.playEnter(),setTimeout(function(){i.onAttackAnimation()},2200)):this.isTwo||2!=this.state?this.onAttackAnimation():(this.isTwo=!0,this._armatureDisPlay.playAnimation("\u72b6\u60012\u53d8\u8eab",1),setTimeout(function(){i.onAttackAnimation()},1500))},onAttackAnimation:function(){var t=this;if(!this.stopAni){var e=this.onGetAniIndex();if(1===this.state)1==e?(this._armatureDisPlay.playAnimation("\u72b6\u60011\u5de6\u653b\u51fb",1),setTimeout(function(){t.baseJS.createLetterItem(cc.v2(-148,105)),t.onAttackAnimation()},300)):2==e?(this._armatureDisPlay.playAnimation("\u72b6\u60011\u53f3\u653b\u51fb",1),setTimeout(function(){t.baseJS.createLetterItem(cc.v2(148,105)),t.onAttackAnimation()},300)):3==e&&(this._armatureDisPlay.playAnimation("\u751f\u6c14",0),setTimeout(function(){t.onAttackAnimation()},1500));else{var i=0;1==e?(this._armatureDisPlay.playAnimation("\u72b6\u60012\u5de6\u653b\u51fb",1),this.schedule(function(){var t=this;this.baseJS.createLetterItem(cc.v2(-108-86*i,105)),3==++i&&(this._armatureDisPlay.playAnimation("\u72b6\u60012\u5f85\u673a",0),setTimeout(function(){t.onAttackAnimation()},2e3))},.3,2,.3)):2==e?(this._armatureDisPlay.playAnimation("\u72b6\u60012\u53f3\u653b\u51fb",1),this.schedule(function(){this.baseJS.createLetterItem(cc.v2(108+86*i,105)),3==++i&&this.onAttackAnimation()},.3,2,.3)):3==e&&(this._armatureDisPlay.playAnimation("\u72b6\u60012\u751f\u6c14",0),setTimeout(function(){t.onAttackAnimation()},2500))}}},onGetAniIndex:function(){return this.initAniIndex++,this.initAniIndex>3&&(this.initAniIndex=1),this.initAniIndex},onWin:function(){return 0},onStop:function(){this.stopAni=!0,1===this.state?this._armatureDisPlay.playAnimation("\u72b6\u60011\u5f85\u673a",1):this._armatureDisPlay.playAnimation("\u72b6\u60012\u5f85\u673a",1)}}),cc._RF.pop()},{}],attackStateJS:[function(t,e,i){"use strict";cc._RF.push(e,"1b010YaucVNeryeFcpRmfIb","attackStateJS"),t("gameWindowFun");var o=t("gameLocalData");cc.Class({extends:cc.Component,properties:{Bosses:[cc.Prefab]},start:function(){},onPlayGame:function(t){this.isStop=!1;var e=t.getCurLevelData().id;this.id!=e&&(this.isFristInit=!0,this.id=e,this.gameJS=t,this.gameJS.onPlayLighting(!0),this.bossIndex=this.gameJS.gotoGameData.chapterId,this.createBoss(),this.gameJS.Bosslayer.addChild(this.bossNode),this.bossJS.onInit(this),this.bossData=t.getCurLevelData().boss,this.data=this.bossData.attackState,this.speed=this.bossData.attackSpeed),this.bossNode.active=!0,window.GameAudioJS().onPlayBossBG(),this.playAnimation(),this.gameJS.EnergyProgressBar.active=!0,this.energyProgressBar=this.gameJS.EnergyProgressBar.getComponent(cc.ProgressBar),this.energyProgressBar.progress=0,this.onUpdatePoolData()},createBoss:function(){0==this.bossIndex?(this.bossNode=cc.instantiate(this.Bosses[0]),this.bossJS=this.bossNode.getComponent("crabBoss")):1==this.bossIndex?(this.bossNode=cc.instantiate(this.Bosses[1]),this.bossJS=this.bossNode.getComponent("airplaneBoss")):2==this.bossIndex&&(this.bossNode=cc.instantiate(this.Bosses[2]),this.bossJS=this.bossNode.getComponent("catBoss"))},playAnimation:function(){var t=this;this.isFristInit?o.GameProgressData.find(function(t){return-1==t.chapterId&&3==t.sectionId})?this.bossJS.playAnimation(this.isFristInit,1-this.onGetBloodRatio()):(this.gameJS.onRequestSetUserPorgress(-1,3,1),this.bossJS.playEnter(),setTimeout(function(){t.gameJS.onNoviceGuidePop(5,void 0,!1,function(){t.bossJS.playAnimation(!1,1-t.onGetBloodRatio())})},2e3)):this.bossJS.playAnimation(this.isFristInit,1-this.onGetBloodRatio());if(this.isFristInit){this.isFristInit=!1;var e=this.onGetBossDefaultY();this.bossNode.runAction(cc.moveTo(2,0,e))}},onWin:function(){this.bossJS.onWin()},onUpdatePoolData:function(){this.isCreateOver=!1,this.unscheduleAllCallbacks(this),this.letterRectIndex=0,this.curNormalLetterPool=this.data.normal,this.curUpdateCount=this.data.updateCount},onRecover:function(){this.bossNode&&(this.isFristInit=!0,this.bossNode.active=!1,this.gameJS.EnergyProgressBar.active=!1,this.bossNode.y=490)},onGetBossDefaultY:function(){return 0==this.bossIndex?170:1==this.bossIndex?200:2==this.bossIndex?230:200},onKeyDown:function(t,e){var i=e.getComponent("letterRect");return-1==i.removeCode(t)?null:(i.bulletSpeed=50,i)},onGetBloodRatio:function(){return this.bossNode.residueBlood?(this.bossData.blood-this.bossNode.residueBlood)/this.bossData.blood:0},onLose:function(){this.onStop()},randomToFloor:function(t,e){return this.gameJS.randomToFloor(t,e)},createLetterItem:function(t){if(!this.isStop&&this.letterRectIndex<this.curUpdateCount){var e=this.gameJS.createLetterItem(),i=this.curNormalLetterPool[this.gameJS.randomToFloor(0,this.curNormalLetterPool.length)];e.getComponent("letterRect").onInit(i,t,this.speed),this.letterRectIndex++,this.gameJS.onAutoLocation(),this.letterRectIndex==this.curUpdateCount&&(this.isCreateOver=!0)}},onKeyError:function(){},onStop:function(){this.isStop=!0,this.bossJS.onStop()},finishOnce:function(){var t=this;this.energyProgressBar.progress+=1/this.curUpdateCount,this.isCreateOver&&this.gameJS.getLettersAllFinish()&&(this.onStop(),setTimeout(function(){t.gameJS.onBack()},1e3))}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],beatingStateJS:[function(t,e,i){"use strict";cc._RF.push(e,"d578bH852hIWqAZKcRJ17LU","beatingStateJS"),t("gameWindowFun");var o=t("gameLocalData");cc.Class({extends:cc.Component,properties:{Blood:cc.Node,WeaknessLetterRect:cc.Prefab,QTEStart:cc.Node,bossParticleLayer:cc.Node},start:function(){this.interval=300},onPlayGame:function(t){var e=this;this.Blood.active=!0;var i=t.getCurLevelData().id;this.id!=i&&(this.gameJS=t,this.id=i,this.bossNode=this.gameJS.Bosslayer.children[0],this.QTEStartAnim=this.QTEStart.getComponent(cc.Animation),this.bossData=t.getCurLevelData().boss,this.data=this.bossData.beatingState,this.sumBlood=this.bossData.blood,this.bloodJS=this.Blood.getComponent("blood"),this.bloodJS.onInit(this.sumBlood),this.energyProgressBar=this.gameJS.EnergyProgressBar.getComponent(cc.ProgressBar),this.y=this.bossNode.y+33,this.particle=this.bossParticleLayer.getChildByName("particle"),this.particle1=this.bossParticleLayer.getChildByName("particle1")),window.GameAudioJS().onStopMusic(),window.GameAudioJS().onPlayQTEAppear(),setTimeout(function(){window.GameAudioJS().onPlayQTEBG(),e.gameJS.onPlayLighting(!1)},2e3),this.isWin=!1,this.onUpdatePoolData(),this.onPlayAnimation(),this.gameJS.checkGotoQTE(!0)},onUpdatePoolData:function(){var t=this;this.unscheduleAllCallbacks(this),this.curNormalLetterPool=this.data.normal,this.curBeatTime=this.data.beatTime,this.updateCount=this.data.updateCount,this.isPlay=!0;var e=.1*this.updateCount+.7;o.GameProgressData.find(function(t){return-1==t.chapterId&&4==t.sectionId})?this.onStartTime(e):setTimeout(function(){t.gameJS.onRequestSetUserPorgress(-1,4,1),t.gameJS.onNoviceGuidePop(6,void 0,!1,function(){t.onStartTime(.1)})},1e3*e)},onStartTime:function(t){var e=0;this.schedule(function(){++e,this.energyProgressBar.progress-=.05,20==e&&this.onSendBullet()},this.curBeatTime/20,19,t)},onKeyDown:function(t,e){var i=e.getComponent("weaknessLetterRect");return-1==i.removeCode(t)?null:(i.launchBullet=!1,i)},onRecover:function(){this.bloodJS&&(this.Blood.active=!1,this.bloodJS.onInit(this.sumBlood),this.bossNode.residueBlood=this.sumBlood)},onLose:function(){this.isPlay=!1,clearTimeout(this.timeOut)},onPlayAnimation:function(){this.QTEStartAnim.play();var t=this.gameJS.BgAnimBox.width,e=75*-this.updateCount/2,i=0;this.schedule(function(){var o=this,n=cc.instantiate(this.WeaknessLetterRect);n.index=i,this.gameJS.LetterBoxs.addChild(n),n.getComponent("weaknessLetterRect").onInit(cc.v2((t+n.width)/2,-90),function(){o.finishOnce(n.index)},0),n.getComponent("weaknessLetterRect").onSetText(this.getLetterText());var s=e+75*i+37.5;n.runAction(cc.moveTo(.2,s,n.y-10).easing(cc.easeIn(2))),0==i&&(n.getComponent("weaknessLetterRect").onFlicker(),this.gameJS.onSetAnchorLetter(n)),++i},.1,this.updateCount-1,.7)},getLetterText:function(){return this.curNormalLetterPool[this.gameJS.randomToFloor(0,this.curNormalLetterPool.length)]},onKeyError:function(){this.onSendBullet()},gameOver:function(t){var e=this;setTimeout(function(){1!=e.isWin?e.Blood.active&&(e.Blood.active=!1,e.bloodJS.onReset(),e.gameJS.onBack(-1),e.gameJS.checkGotoQTE(!1)):e.onWin()},this.interval*t+1e3)},onSendBullet:function(){var t=this;this.gameJS.canKeyDown=!1,this.unscheduleAllCallbacks(this);for(var e=this.onTragetJS(),i=0,o=function(o){var n=t.gameJS.LetterBoxs.children[o];n.isHigh?(i=o+1,setTimeout(function(){var i=n.convertToWorldSpaceAR(cc.v2(0,0));window.GameAudioJS().onPlayBullet(),t.gameJS.createBulletItem(e,i),t.onSetBlood(o+1),n.destroy()},t.interval*o)):n.destroy()},n=0;n<this.gameJS.LetterBoxs.children.length;n++)o(n);0!=i&&(window.GameAudioJS().onPlayBossBG(),this.createShockEff(i)),this.gameJS.onPlayLighting(!1,!1),this.gameOver(i)},onTragetJS:function(){var t=this,e=!0,i={bulletSpeed:40,getBullseyePosition:function(){return t.bossNode.getPosition()},setHit:function(){(e=!e)?t.particle.getComponent(cc.ParticleSystem).resetSystem():t.particle1.getComponent(cc.ParticleSystem).resetSystem()}};return i},createShockEff:function(t){var e=2,i=this.interval/1e3/8;this.schedule(function(){e+=1;var t=cc.sequence(cc.moveBy(i,cc.v2(1*e,1*e)),cc.moveBy(i,cc.v2(-1*e,-1*e)),cc.moveBy(i,cc.v2(-1*e,1*e)),cc.moveBy(i,cc.v2(1*e,-1*e)),cc.moveBy(i,cc.v2(-1*e,-1*e)),cc.moveBy(i,cc.v2(1*e,1*e)),cc.moveBy(i,cc.v2(1*e,-1*e)),cc.moveBy(i,cc.v2(-1*e,1*e)));this.bossNode.runAction(t.easing(cc.easeSineIn(5)))},this.interval/1e3,t-1,0)},onSetBlood:function(t){if(0!=this.bossNode.residueBlood){var e=this.bloodJS.onSetBlood(t);this.bossNode.residueBlood=e,0==e&&(this.isWin=!0)}},onWin:function(){var t=this,e=this.gameJS.hitOKCount/(this.gameJS.hitOKCount+this.gameJS.hitErrorCount);this.gameJS.onRunTimer(!1),console.log("this.gameJS.hitTimeOffset ",this.gameJS.hitTimeOffset),console.log("this.accuracy ",e);var i=1,o=e>=this.bossData.threeStars.accuracy,n=this.gameJS.hitTimeOffset<=this.bossData.threeStars.time;o&&n?i=3:e>=this.bossData.twoStars&&(i=2);var s=this.gameJS.getCurLevelData().exercise.exerciseState.length;this.gameJS.onUpdateProgressData(i,s),this.gameJS.onWinPop(i,o,n,this.bossData,function(e){2==e&&t.gameJS.checkGotoQTE(!1)})},finishOnce:function(t){var e=this.gameJS.LetterBoxs.children;if(t<e.length)if(e[t].getComponent("weaknessLetterRect").onSetHigh(),t+1<e.length){var i=e[t+1];this.gameJS.onSetAnchorLetter(i),i.getComponent("weaknessLetterRect").onFlicker()}else this.onSendBullet()}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],blood:[function(t,e,i){"use strict";cc._RF.push(e,"4de5cEL9KZBsoHOJVUD1v/4","blood"),cc.Class({extends:cc.Component,properties:{WhiltBar:cc.Node,HaemalCountLabel:cc.Node,NumLabel:cc.Node},start:function(){},onInit:function(t){this.sumBlood=t,this.curBlood=t,this.HaemalCountLabel.getComponent(cc.Label).string="x"+this.sumBlood/10,this.onReset()},onReset:function(){this.num=0,this.NumLabel.getComponent(cc.Label).string=""},onSetBlood:function(t){var e=this.curBlood;this.curBlood=this.curBlood-t>0?this.curBlood-t:0;var i=Math.ceil(this.curBlood/10),o=this.curBlood%10==0?10:this.curBlood%10;this.node.getComponent(cc.ProgressBar).progress=o/10,this.HaemalCountLabel.getComponent(cc.Label).string="x"+i;var n=e-this.curBlood;this.schedule(function(){this.NumLabel.getComponent(cc.Label).string="-"+ ++this.num},.25/n,n-1,0);var s=cc.sequence(cc.spawn(cc.moveBy(.15,cc.v2(0,10)).easing(cc.easeBackIn(2)),cc.scaleTo(.15,1.2,1.2)),cc.spawn(cc.moveBy(.15,cc.v2(0,-10)).easing(cc.easeBackOut(2)),cc.scaleTo(.15,1,1)));return this.NumLabel.runAction(s),this.curBlood}}),cc._RF.pop()},{}],bullet:[function(t,e,i){"use strict";cc._RF.push(e,"749dcDmLEZBp5k/fmAbmzrN","bullet"),cc.Class({extends:cc.Component,properties:{particle:cc.Prefab},start:function(){},onInit:function(t,e,i,o){if(0!=e){this.node.rotation=0,this.node.setPosition(0,0);var n=this.node.convertToNodeSpaceAR(e);this.node.setPosition(n)}this.node.addChild(cc.instantiate(this.particle)),this.stallIndex=i,this.tragetJS=t,this.isUpdate=!0,this.cb=o},update:function(t){if(this.tragetJS&&this.isUpdate){var e=this.tragetJS.getBullseyePosition(),i=cc.v2(this.node.x,this.node.y),o=i.sub(e).mag();if(o<=40)return this.isUpdate=!1,this.tragetJS.setHit(this.stallIndex),this.node.destroyAllChildren(),this.cb&&this.cb(this.node),!0;var n=e.sub(i),s=i.x+this.tragetJS.bulletSpeed*n.x/o,a=i.y+this.tragetJS.bulletSpeed*n.y/o,c=cc.v2(s,a),r=i.x,h=i.y,l=90-180*Math.atan2(a-h,s-r)/Math.PI;this.node.rotation=l,this.node.setPosition(c)}}}),cc._RF.pop()},{}],buttonSetting:[function(t,e,i){"use strict";cc._RF.push(e,"b81de5oButLy796iDOquqXU","buttonSetting"),cc.Class({extends:cc.Component,properties:{isScale:!0,scaleRatio:1.05},start:function(){var t=this;this.node.on("mouseenter",function(){cc.game.canvas.style.cursor="pointer",t.isScale&&t.node.setScale(t.scaleRatio)}),this.node.on("mouseleave",function(){cc.game.canvas.style.cursor="default",t.isScale&&t.node.setScale(1)}),this.node.on("mouseup",function(){cc.game.canvas.style.cursor="default"})}}),cc._RF.pop()},{}],catBoss:[function(t,e,i){"use strict";cc._RF.push(e,"00a02o67ftFl4l63zyEhwsD","catBoss"),cc.Class({extends:cc.Component,properties:{},start:function(){},onInit:function(t){this.baseJS=t,this._armatureDisPlay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature(),this.isTwo=!1},playEnter:function(){this._armatureDisPlay.playAnimation("\u8fdb\u5165",0)},playAnimation:function(t,e){var i=this;this.stopAni=!1,this.state=e>.5?1:2,this.initAniIndex=0,t?(this.playEnter(),setTimeout(function(){i.onAttackAnimation()},2200)):this.isTwo||2!=this.state?this.onAttackAnimation():(this.isTwo=!0,this._armatureDisPlay.playAnimation("\u72b6\u60011\u53d8\u8eab",1),setTimeout(function(){i.onAttackAnimation()},1500))},onAttackAnimation:function(){var t=this;if(!this.stopAni){var e=this.onGetAniIndex();if(1===this.state)1==e?(this._armatureDisPlay.playAnimation("\u72b6\u60011\u653b\u51fb1",1),setTimeout(function(){t.baseJS.createLetterItem(cc.v2(-148,105)),t.onAttackAnimation()},300)):2==e?(this._armatureDisPlay.playAnimation("\u72b6\u60011\u653b\u51fb2",1),setTimeout(function(){t.baseJS.createLetterItem(cc.v2(148,105)),t.onAttackAnimation()},300)):3==e&&(this._armatureDisPlay.playAnimation("\u72b6\u60011\u751f\u6c14",0),setTimeout(function(){t.onAttackAnimation()},1500));else{var i=0;1==e?(this._armatureDisPlay.playAnimation("\u72b6\u60012\u653b\u51fb1",1),this.schedule(function(){var t=this;this.baseJS.createLetterItem(cc.v2(-108-86*i,105)),3==++i&&(this._armatureDisPlay.playAnimation("\u72b6\u60012\u5f85\u673a",0),setTimeout(function(){t.onAttackAnimation()},800))},.3,2,.3)):2==e?(this._armatureDisPlay.playAnimation("\u72b6\u60012\u653b\u51fb2",1),this.schedule(function(){this.baseJS.createLetterItem(cc.v2(108+86*i,105)),3==++i&&(this._armatureDisPlay.playAnimation("\u72b6\u60012\u5f85\u673a",0),this.onAttackAnimation())},.3,2,.3)):3==e&&(this._armatureDisPlay.playAnimation("\u72b6\u60012\u5f85\u673a",0),setTimeout(function(){t.onAttackAnimation()},2500))}}},onGetAniIndex:function(){return this.initAniIndex++,this.initAniIndex>3&&(this.initAniIndex=1),this.initAniIndex},onWin:function(){return this._armatureDisPlay.playAnimation("\u5931\u8d25\u5f85\u673a",1),1500},onStop:function(){this.stopAni=!0,1===this.state?this._armatureDisPlay.playAnimation("\u72b6\u60011\u5f85\u673a",1):this._armatureDisPlay.playAnimation("\u72b6\u60012\u5f85\u673a",1)}}),cc._RF.pop()},{}],crabBoss:[function(t,e,i){"use strict";cc._RF.push(e,"e5a94vtCKhGD6UKHEhhMigS","crabBoss"),cc.Class({extends:cc.Component,properties:{},start:function(){},onInit:function(t){this.baseJS=t,this._armatureDisPlay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature(),this.isTwo=!1},playEnter:function(){this._armatureDisPlay.playAnimation("\u8d70",0)},playAnimation:function(t,e){var i=this;this.stopAni=!1,this.state=e>.5?1:2,this.initAniIndex=0,t?(this.playEnter(),setTimeout(function(){i.onAttackAnimation()},2200)):this.isTwo||2!=this.state?this.onAttackAnimation():(this.isTwo=!0,this._armatureDisPlay.playAnimation("\u9732\u5f31\u70b9",1),setTimeout(function(){i.onAttackAnimation()},1300))},onAttackAnimation:function(){var t=this;if(!this.stopAni){var e=this.onGetAniIndex();if(1==this.state)1==e?(this._armatureDisPlay.playAnimation("\u5de6\u624b\u6254",1),setTimeout(function(){t.baseJS.createLetterItem(cc.v2(-115,150)),t.onAttackAnimation()},500)):2==e?(this._armatureDisPlay.playAnimation("\u53f3\u624b\u6254",1),setTimeout(function(){t.baseJS.createLetterItem(cc.v2(115,150)),t.onAttackAnimation()},500)):3==e&&(this._armatureDisPlay.playAnimation("\u53d1\u6012",1),setTimeout(function(){t.onAttackAnimation()},1400));else{var i=0;1==e?(this._armatureDisPlay.playAnimation("\u9732\u5f31\u70b9\u5de6\u624b\u6254",1),this.schedule(function(){var t=this;this.baseJS.createLetterItem(cc.v2(-60-86*i,150)),2==++i&&(this._armatureDisPlay.playAnimation("\u9732\u5f31\u70b9\u547c\u5438",1),setTimeout(function(){t.onAttackAnimation()},1400))},.3,1,.3)):2==e?(this._armatureDisPlay.playAnimation("\u9732\u5f31\u70b9\u53f3\u624b\u6254",1),this.schedule(function(){this.baseJS.createLetterItem(cc.v2(60+86*i,150)),2==++i&&this.onAttackAnimation()},.3,1,.3)):3==e&&(this._armatureDisPlay.playAnimation("\u53d1\u6012",1),setTimeout(function(){t.onAttackAnimation()},1400))}}},onGetAniIndex:function(){return this.initAniIndex++,this.initAniIndex>3&&(this.initAniIndex=1),this.initAniIndex},onWin:function(){return 0},onStop:function(){this.stopAni=!0,1===this.state?this._armatureDisPlay.playAnimation("\u547c\u5438",1):this._armatureDisPlay.playAnimation("\u9732\u5f31\u70b9\u547c\u5438",1)}}),cc._RF.pop()},{}],exerciseStateJS:[function(t,e,i){"use strict";cc._RF.push(e,"9f50cMUQzlDq6G1kXQzPd8X","exerciseStateJS"),t("gameWindowFun");t("gameLocalData");cc.Class({extends:cc.Component,properties:{},start:function(){},onPlayGame:function(t,e){this.gameJS=t,window.GameAudioJS().onPlayExerciseBG(),this.data=t.getCurLevelData().exercise,this.keyboardJS=t.KeyboardJS,this.curPoolIndex=0,this.levelIndex=e,this.levelCount=this.data.exerciseState.length,this.topY=290,this.onUpdatePoolData()},onUpdatePoolData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.curLevelData=this.data.exerciseState[this.levelIndex].state,this.curPoolIndex<this.curLevelData.length)if(this.letterRectIndex=0,this.curNormalLetterPool=this.curLevelData[this.curPoolIndex].normal,this.curUpdateCount=this.curLevelData[this.curPoolIndex].updateCount,t){this.gameJS.onRunTimer(!0),this.gameJS.hitOKCount=0,this.gameJS.hitErrorCount=0,this.isCurCreateOver=!1;var e=3,i=this.gameJS.BgAnimBox.height;this.schedule(function(){var t=3==e,o=this.createLetterItem((i+80)/2,t);if(o){var n=this.topY-80*e;o.runAction(cc.moveTo(.2,o.x,n).easing(cc.easeIn(2)))}--e},.1,3,0)}else this.createLetterItem(this.topY)},onKeyDown:function(t,e){var i=e.getComponent("letterRect");return-1==i.removeCode(t)?null:(i.bulletSpeed=60,i)},onLose:function(){},createLetterItem:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.letterRectIndex<this.curUpdateCount){var i=this.gameJS.createLetterItem(),o=this.curNormalLetterPool[this.gameJS.randomToFloor(0,this.curNormalLetterPool.length)],n=this.keyboardJS.getPointX(o);return i.getComponent("letterRect").onInit(o,cc.v2(n,t),-1),this.letterRectIndex++,e&&this.gameJS.onAutoLocation(),this.letterRectIndex==this.curUpdateCount&&this.curPoolIndex==this.curLevelData.length-1&&(this.isCurCreateOver=!0),i}return++this.curPoolIndex,this.onUpdatePoolData(!1),null},onKeyError:function(){},finishOnce:function(){for(var t=this,e=0;e<this.gameJS.LetterBoxs.children.length;e++){var i=this.gameJS.LetterBoxs.children[e];i.runAction(cc.moveTo(.1,i.x,i.y-80).easing(cc.easeIn(1)))}if(this.isCurCreateOver){if(this.gameJS.getLettersAllFinish()){var o=this.gameJS.hitOKCount/(this.gameJS.hitOKCount+this.gameJS.hitErrorCount);this.gameJS.onRunTimer(!1),console.log("this.gameJS.hitTimeOffset ",this.gameJS.hitTimeOffset),console.log("this.accuracy ",o);var n=1,s=this.data.exerciseState[this.levelIndex],a=o>=s.threeStars.accuracy,c=this.gameJS.hitTimeOffset<=s.threeStars.time;a&&c?n=3:o>=s.twoStars&&(n=2),this.gameJS.onUpdateProgressData(n,this.levelIndex),this.gameJS.onUnlockNextLevel(this.levelIndex),this.levelIndex==this.levelCount-1&&this.gameJS.onUnlockNextModule(),this.gameJS.onWinPop(n,a,c,s,function(e){if(2==e)t.curPoolIndex=0,t.onUpdatePoolData();else if(3==e){if(t.levelIndex++,t.levelIndex<t.levelCount)t.data.exerciseState[t.levelIndex].isVideo?t.gameJS.onGotoVideo(t.levelIndex):(t.curPoolIndex=0,t.onUpdatePoolData());else t.gameJS.KeyboardJS.onHandOver(),t.gameJS.onBack()}})}}else setTimeout(function(){t.createLetterItem(t.topY)},100)}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],failurePop:[function(t,e,i){"use strict";cc._RF.push(e,"e714d7CbstJBYzHl/kWieVR","failurePop"),cc.Class({extends:cc.Component,properties:{progressNode:cc.Node,bossImg:cc.Node,bossIcon:cc.Node,btns:cc.Node,bossFrames:[cc.SpriteFrame]},start:function(){},onDefault:function(){this.progressNode.opacity=0,this.progressNode.getComponent(cc.ProgressBar).progress=0,this.btns.opacity=0,this.bossImg.setScale(0)},onInit:function(t,e,i){var o=this;this.bossIcon.getComponent(cc.Sprite).spriteFrame=this.bossFrames[e];var n=[{x:184,y:165},{x:203,y:161},{x:203,y:113}];this.bossIcon.setContentSize(n[e].x,n[e].y),this.bossImg.runAction(cc.scaleTo(.5,1,1).easing(cc.easeIn(3))),setTimeout(function(){o.progressNode.opacity=255,o.schedule(function(){var e=this,i=this.progressNode.getComponent(cc.ProgressBar).progress+.05;i<t?this.progressNode.getComponent(cc.ProgressBar).progress=i:(this.unscheduleAllCallbacks(this),this.progressNode.getComponent(cc.ProgressBar).progress=t,setTimeout(function(){e.btns.opacity=255},100))},.025)},600),this.cb=i},onHome:function(){this.cb(1)},onAgain:function(){this.cb(2)}}),cc._RF.pop()},{}],gameAudio:[function(t,e,i){"use strict";cc._RF.push(e,"6e77cBFDHxA947ccihxYpaK","gameAudio"),cc.Class({extends:cc.Component,properties:{bullet:cc.AudioClip,keyError:cc.AudioClip,win:cc.AudioClip,lose:cc.AudioClip,bossAppear:cc.AudioClip,bossExplode:cc.AudioClip,QTEAppear:cc.AudioClip,bossBG:cc.AudioClip,QTEBG:cc.AudioClip,exerciseBG:cc.AudioClip,homeBG:cc.AudioClip,btn:cc.AudioClip},start:function(){},onPlayBossBG:function(){cc.audioEngine.playMusic(this.bossBG,!0),cc.audioEngine.setMusicVolume(.5)},onPlayQTEBG:function(){cc.audioEngine.playMusic(this.QTEBG,!0),cc.audioEngine.setMusicVolume(1)},onPlayExerciseBG:function(){cc.audioEngine.playMusic(this.exerciseBG,!0),cc.audioEngine.setMusicVolume(.5)},onPlayHomeBG:function(){cc.audioEngine.playMusic(this.homeBG,!0),cc.audioEngine.setMusicVolume(.5)},onPlayBullet:function(){cc.audioEngine.playEffect(this.bullet,!1)},onPlayKeyError:function(){cc.audioEngine.playEffect(this.keyError,!1)},onPlayWin:function(){cc.audioEngine.playEffect(this.win,!1)},onPlayLose:function(){cc.audioEngine.playEffect(this.lose,!1)},onPlayBossAppear:function(){cc.audioEngine.playEffect(this.bossAppear,!1)},onPlayBossExplode:function(){cc.audioEngine.playEffect(this.bossExplode,!1)},onPlayBtn:function(){cc.audioEngine.playEffect(this.btn,!1)},onPlayQTEAppear:function(){cc.audioEngine.playEffect(this.QTEAppear,!1)},onStopAllEffects:function(){cc.audioEngine.stopAllEffects()},onStopMusic:function(){cc.audioEngine.stopMusic()}}),cc._RF.pop()},{}],gameItem:[function(t,e,i){"use strict";cc._RF.push(e,"13202gUS3JHHaTN0wVutBXY","gameItem");var o=t("gameLocalData");t("gameWindowFun"),cc.Class({extends:cc.Component,properties:{levelItem:cc.Prefab,title:cc.Node,levelContent:cc.Node,bossItem:cc.Node,bossFrame:[cc.SpriteFrame],bossIcon:cc.Node,bossTitle:cc.Node,bossInfo:cc.Node,bossDiademaContent:cc.Node,bossPlayBtn:cc.Node,bossShade:cc.Node,bossLock:cc.Node,bossDiademaFrame:cc.SpriteFrame},start:function(){},onInit:function(t,e){var i=this;if(this.gameData=e,this.chapterId=t,this.title.getComponent(cc.Label).string=e.name,e.exercise.exerciseState)for(var o=function(t){var o=e.exercise.exerciseState[t],n=cc.instantiate(i.levelItem);i.levelContent.addChild(n),n.getComponent("levelItem").onInit(t,o,function(e){i.onPlayGame(t,e)})},n=0;n<e.exercise.exerciseState.length;n++)o(n);this.bossIcon.getComponent(cc.Sprite).spriteFrame=this.bossFrame[t];var s=[{x:132,y:118},{x:145,y:115},{x:145,y:81}];this.bossIcon.setContentSize(s[t].x,s[t].y),this.bossTitle.getComponent(cc.Label).string=e.boss.name,this.bossInfo.getComponent(cc.Label).string=e.boss.describe;var a=62*(e.exercise.exerciseState.length-3);this.node.height+=a,this.bossItem.height+=a,this.bossShade.height+=a,this.bossItem.y-=a/2,this.bossIndex=e.exercise.exerciseState.length},onSetProgressData:function(t){var e=this;this.progressData=t;for(var i=0;i<this.levelContent.children.length;i++){this.levelContent.children[i].getComponent("levelItem").onSetProgressData(this.chapterId,this.progressData)}var o=this.progressData.find(function(t){return t.chapterId==e.chapterId&&t.sectionId==e.bossIndex});o&&(this.onBossUnLock(),this.onLightenDiadema(o.score))},onBossUnLock:function(){this.bossShade.active=!1,this.bossLock.active=!1,this.bossPlayBtn.active=!0},onLightenDiadema:function(t){t>this.bossDiademaContent.children.length&&(t=this.bossDiademaContent.children.length);for(var e=0;e<t;e++)this.bossDiademaContent.children[e].getComponent(cc.Sprite).spriteFrame=this.bossDiademaFrame},onPlay:function(){this.onPlayGame(this.bossIndex,!1,!0)},onPlayGame:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.GameAudioJS().onPlayBtn(),o.GameData=this.gameData,o.GotoGameData={chapterId:this.chapterId,sectionId:t,isBossLevel:i},e?cc.director.loadScene("videoScene"):cc.director.loadScene("gameScene")}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],gameLocalData:[function(t,e,i){"use strict";cc._RF.push(e,"f38e6l32DdB0ZJCU5ai9q7b","gameLocalData"),t("gameWindowFun");var o={},n=function(t,e,i){for(var n in i)i.hasOwnProperty(n)&&(e+="__"+n+"_"+i[n]);o[e]=t},s=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t+="__"+i+"_"+e[i]);if(void 0!==o[t])return o[t]};e.exports={set UserId(t){return n(t,"userId")},get UserId(){return function(t){if(void 0!==(o=o||{})[t])return o[t];if(window.isShell){var e=window.parent.ShellJS().getLocalStorageItem(t);o[t]=null==e||""===e?null:JSON.parse(e)}return o[t]}("userId")},set GameData(t){return n(t,"gameData")},get GameData(){return s("gameData")},set GotoGameData(t){return n(t,"gotoGameData")},get GotoGameData(){return s("gotoGameData")},set GameProgressData(t){return n(t,"gameProgressData")},get GameProgressData(){return s("gameProgressData")},set IsPause(t){return n(t,"isPause")},get IsPause(){return s("isPause")}},cc._RF.pop()},{gameWindowFun:"gameWindowFun"}],gameWindowFun:[function(t,e,i){"use strict";cc._RF.push(e,"274f5e8QrxP5a89A3NJvrj2","gameWindowFun"),window.isShell=!!window.parent.nw,window.GamePersistRootJS=function(){var t=cc.director.getScene().getChildByName("persisRoot");return window.PersistRootJSCache=t.getComponent("persisRoot"),window.PersistRootJSCache},window.GameHttpJS=function(){return window.isShell?window.parent.HttpJS():window.GamePersistRootJS().getHttpJS()},window.GameAudioJS=function(){return window.GamePersistRootJS().getAudioJS()},window.GameUserJS=function(){return window.GamePersistRootJS().getUserJS()},window.VideoUrl=function(t){return"https://client-hot-update.oss-cn-beijing.aliyuncs.com/typingResource/"+t},cc._RF.pop()},{}],game:[function(t,e,i){"use strict";cc._RF.push(e,"e9c96fdDDFDPLKEgIbxLnCI","game");var o=t("gameLocalData");t("gameWindowFun"),cc.Class({extends:cc.Component,properties:{LetterBoxs:cc.Node,Bosslayer:cc.Node,BulletsBoxs:cc.Node,LetterRectItem:cc.Prefab,BulletItem:cc.Prefab,Keyboard:cc.Node,stateJSNode:cc.Node,BgAnimBox:cc.Node,Lighting:cc.Node,EnergyProgressBar:cc.Node,bg_left:[cc.Node],bg_right:[cc.Node],winPop:cc.Node,pausePop:cc.Node,failurePop:cc.Node,NoviceGuidePop:cc.Node},start:function(){},onLoad:function(){var t=this;this.bgSpeed=1,o.IsPause=!1,this.initSetting(),this.hitTimeCB=function(){o.IsPause||(t.hitTimeOffset+=.5)},this.KeyboardJS=this.Keyboard.getComponent("keyboard"),this.gameData=o.GameData,this.gotoGameData=o.GotoGameData,console.log("this.gotoGameData",this.gotoGameData),this.setAnchorCurStateIndex(this.gotoGameData.isBossLevel),this.correctCount=0,this.bulletNodePool=new cc.NodePool;for(var e=0;e<10;++e)this.bulletNodePool.put(cc.instantiate(this.BulletItem));cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.onBgAnim(),this.onPlayGame();var i=o.GameProgressData.find(function(t){return 0==t.chapterId&&1==t.sectionId});i&&0!=i.score||setTimeout(function(){t.onNoviceGuidePop(2)},1e3)},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},initSetting:function(){this.hitOKCount=0,this.hitErrorCount=0,this.hitTimeOffset=0},setAnchorCurStateIndex:function(t){this.curStateIndex=t?1:0},onBgAnim:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.BgAnimBox.getChildByName("leftSprite"),n=this.BgAnimBox.getChildByName("rightSprite"),s=function(i,n){t?setTimeout(function(){o.IsPause||n.getComponent("smallRule").onPlay()},500*i):n.getComponent("smallRule").onPlay(e)},a=0;a<i.children.length;a++){s(a,i.children[a])}for(var c=0;c<n.children.length;c++){s(c,n.children[c])}},onPlayGame:function(){this.winPop.active=!1,this.isLose=!1,this.canKeyDown=!0,this.curAnchorLetter=null,this.BulletsBoxs.destroyAllChildren(),this.LetterBoxs.destroyAllChildren(),this.curStateJS=this.getStateJS(),this.curStateJS.onPlayGame(this,this.gotoGameData.sectionId)},onBack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.curStateIndex+=t,this.onPlayGame()},checkGotoQTE:function(t){this.isQTE=t,t?(this.bgSpeed=.2,this.onBgAnim(!1,!1)):(this.bgSpeed=1,this.onBgAnim(!1,!0))},getStateJS:function(){return 0==this.curStateIndex?this.stateJSNode.getComponent("exerciseStateJS"):1==this.curStateIndex?this.stateJSNode.getComponent("practiceStateJS"):2==this.curStateIndex?this.stateJSNode.getComponent("attackStateJS"):this.stateJSNode.getComponent("beatingStateJS")},onKeyDown:function(t){if(!this.NoviceGuidePop.active)if(t.keyCode!=cc.macro.KEY.escape){if(!this.isLose&&this.canKeyDown)if(this.curAnchorLetter&&!this.curAnchorLetter.isFinish){var e=this.KeyboardJS.onCanKeyDown(t);if(-1==e.index)return;var i=e.keyValue.split("\n");if(!i||0==i.length)return;var o=i[i.length-1].toLowerCase(),n=this.curStateJS.onKeyDown(o,this.curAnchorLetter);if(!n)return this.onKeyError(e.index),void console.log("\u6253\u9519\u4e86");++this.correctCount;var s=0!=this.curStateIndex,a=this.KeyboardJS.onKeyDown(e.index,!0,s);this.setHandImg(),!1!==n.launchBullet&&this.createBulletItem(n,a)}else console.log("\u65e0\u5b9a\u4f4d")}else this.onPausePop()},onKeyError:function(t){this.correctCount=0,this.LetterBoxs&&(window.GameAudioJS().onPlayKeyError(),this.KeyboardJS.onKeyDown(t,!1),this.curStateJS.onKeyError(),++this.hitErrorCount)},onAutoLocation:function(){var t=this;if((!this.curAnchorLetter||this.curAnchorLetter.isFinish)&&this.LetterBoxs)for(var e=0;e<this.LetterBoxs.children.length;e++){var i=this.LetterBoxs.children[e];if(!i.isFinish)return this.curAnchorLetter=i,this.curAnchorLetter.getComponent("letterRect").setAnchor(function(){return t.onFinishOnce()},function(){return t.onLose()}),void this.setHandImg()}},setHandImg:function(){if(0==this.curStateIndex&&this.curAnchorLetter){var t=this.curAnchorLetter.getComponent("letterRect").getFristLetter();t&&this.KeyboardJS.setHandImg(t)}},onSetAnchorLetter:function(t){this.curAnchorLetter=t},onFinishOnce:function(){window.GameAudioJS().onPlayBullet(),this.curAnchorLetter.isFinish=!0,this.curStateJS.finishOnce(),++this.hitOKCount,this.onAutoLocation()},onLose:function(){this.isLose=!0,this.onFailurePop(),this.curStateJS.onLose(),window.GameAudioJS().onPlayLose();for(var t=0;t<this.LetterBoxs.children.length;t++){this.LetterBoxs.children[t].getComponent("letterRect").onStop()}},onBossOnceAgain:function(){this.stateJSNode.getComponent("attackStateJS").onRecover(),this.stateJSNode.getComponent("beatingStateJS").onRecover(),this.curStateIndex=1,this.onPlayGame()},onWinPop:function(t,e,i,o,n){var s=this,a=0!=this.curStateIndex,c=500;a&&(c=1e3,c+=this.stateJSNode.getComponent("attackStateJS").onWin()),setTimeout(function(){s.winPop.active=!0,s.Keyboard.active=!1,window.GameAudioJS().onPlayWin(),s.winPop.getComponent("winPop").onInit(t,e,i,o,a,function(t){window.GameAudioJS().onPlayBtn(),1==t?s.onGotoMainScene():2==t&&a?(s.onBossOnceAgain(),n(t)):n(t),s.winPop.active=!1,s.Keyboard.active=!0}),s.onWinShowNovicePop(a,t)},c)},onWinShowNovicePop:function(t,e){var i=this,n=t?1:0;o.GameProgressData.find(function(t){return-1==t.chapterId&&t.sectionId==n})||(this.onRequestSetUserPorgress(-1,n,1),setTimeout(function(){if(t){i.onNoviceGuidePop(8,[{showArrowIndex:1,x:42,y:-211},{showArrowIndex:2,x:-128,y:-211}],!0)}else{i.onNoviceGuidePop(3,[{showArrowIndex:2,x:130,y:-211}],!0)}},2100+300*e))},onFailurePop:function(){var t=this;this.failurePop.getComponent("failurePop").onDefault(),this.failurePop.active=!0,this.Keyboard.active=!1;var e=0;if(1==this.curStateIndex){var i=this.getStateJS().onGetSumUpdateCount();e=this.hitOKCount/i/2,console.log("sumCount",i),console.log("this.hitOKCount",i),console.log("progress",e)}else e=.5+this.getStateJS().onGetBloodRatio()/2;this.failurePop.getComponent("failurePop").onInit(e,this.gotoGameData.chapterId,function(e){window.GameAudioJS().onPlayBtn(),1==e?t.onGotoMainScene():2==e&&t.onBossOnceAgain(),t.failurePop.active=!1,t.Keyboard.active=!0});o.GameProgressData.find(function(t){return-1==t.chapterId&&5==t.sectionId})||(this.onRequestSetUserPorgress(-1,5,1),setTimeout(function(){t.onNoviceGuidePop(7,[{showArrowIndex:1,x:72,y:-168}],!0)},1500))},onPausePop:function(){var t=this;this.Keyboard.active&&(cc.director.pause(),this.pausePop.active=!0,this.pausePop.getComponent("pausePop").onInit(function(e){t.pausePop.active=!1,cc.director.resume(),window.GameAudioJS().onPlayBtn(),1==e&&t.onGotoMainScene()}))},onNoviceGuidePop:function(t,e,i,n){o.IsPause=!0,this.NoviceGuidePop.active=!0,this.NoviceGuidePop.getComponent("noviceGuidePop").onInit(t,e,i,function(){o.IsPause=!1,n&&n()})},onUpdateProgressData:function(t,e){this.onRequestSetUserPorgress(this.gotoGameData.chapterId,e,t)},onUnlockNextLevel:function(t){this.onRequestSetUserPorgress(this.gotoGameData.chapterId,t+1,0)},onUnlockNextModule:function(){this.onRequestSetUserPorgress(this.gotoGameData.chapterId+1,0,0)},onRequestSetUserPorgress:function(t,e,i){var n={userId:o.UserId,chapterId:t,sectionId:e,score:i};o.GameProgressData.push(n),window.GameUserJS().requestSetUserPorgress(function(){},n)},onGotoVideo:function(t){o.GotoGameData.sectionId=t,cc.director.loadScene("videoScene")},onGotoMainScene:function(){o.IsPause=!0,this.onRunTimer(!1),cc.director.loadScene("mainScene")},createBulletItem:function(t,e){var i=this,o=void 0;return o=this.bulletNodePool.size()>0?this.bulletNodePool.get():cc.instantiate(this.BulletItem),this.BulletsBoxs.addChild(o),o.getComponent("bullet").onInit(t,e,this.onGetStall(),function(t){i.bulletNodePool.put(t)}),o},onGetStall:function(){var t=Math.ceil(this.correctCount/2);return t>4&&(t=4),t<0&&(t=0),t},createLetterItem:function(){var t=cc.instantiate(this.LetterRectItem);return this.LetterBoxs.addChild(t),t},randomToFloor:function(t,e){return Math.floor(Math.random()*(e-t))+t},random:function(t,e){var i=Math.random()*(e-t)+t;return i},getLettersAllFinish:function(){if(this.LetterBoxs)for(var t=0;t<this.LetterBoxs.children.length;t++){if(!this.LetterBoxs.children[t].isFinish)return!1}return!0},getCurLevelData:function(){return this.gameData},onPlayLighting:function(t){if(!(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return this.Lighting.stopAllActions(),void(this.Lighting.opacity=0);this.Lighting.color=t?new cc.color(255,46,97,255):new cc.color(220,220,220,255);var e=t?.3:.5,i=cc.fadeTo(e,255);i.easing(cc.easeIn(1));var o=cc.fadeTo(e,0);o.easing(cc.easeOut(1)),t?this.Lighting.runAction(cc.repeat(cc.sequence(i,o),3)):this.Lighting.runAction(cc.repeatForever(cc.sequence(i,o)))},bgMove:function(t){for(var e=0;e<t.length;e++){t[e].y-=this.bgSpeed}},checkBgReset:function(t){if(t[0].y<=-t[0].height){var e=t.shift();t.push(e);var i=t[0];e.y=i.height}},onRunTimer:function(t){t?(this.initSetting(),this.schedule(this.hitTimeCB,.5)):this.unschedule(this.hitTimeCB)},update:function(t){this.bgMove(this.bg_left),this.checkBgReset(this.bg_left),this.bgMove(this.bg_right),this.checkBgReset(this.bg_right)}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],httpService:[function(t,e,i){"use strict";cc._RF.push(e,"b8befRODyxIiaYga9VYtcCq","httpService");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};cc.Class({extends:cc.Component,properties:{_messageArray:[]},onLoad:function(){this.repeateRequestArray=[]},initHttp:function(){window.isIOS?this.urlStr=base.url:this.urlStr="https://api.hetao101.com"},sendGet:function(t,e,i,o,n,s){return t=(t=this.urlStr+t).indexOf("?")>=0?t+"&t="+(new Date).valueOf():t+"?t="+(new Date).valueOf(),this._messageArray.push({type:"GET",url:t,callback:e,errorCallback:i,header:o,cancelBtnCallback:n,param:s}),this},sendPost:function(t,e,i,o,n,s,a,c){return t=(t=this.urlStr+t).indexOf("?")>=0?t+"&t="+(new Date).valueOf():t+"?t="+(new Date).valueOf(),this._messageArray.push({type:"POST",url:t,callback:e,sendData:i,errorCallback:o,header:n,isNoErrorTip:s,param:a,cancelBtnCallback:c}),this},sendPut:function(t,e,i){return t=this.urlStr+t,this._messageArray.push({type:"PUT",url:t,callback:e,sendData:i}),this},sendDelete:function(t,e,i,o){return t=this.urlStr+t,this._messageArray.push({type:"DELETE",url:t,callback:e,sendData:i,header:o}),this},sendMessegeOnly:function(t,e,i){return this._messageArray.push({type:"POST",url:t,callback:null,sendData:e,header:i,isSendMessegeOnly:!0}),this},update:function(){var t=this;if(0!==this._messageArray.length){var e=this._messageArray[0],i=e.type,n=e.url,s=e.sendData,a=new XMLHttpRequest;if(a.open(i,n),a.timeout=15e3,a.responseType="json",e.isSendMessegeOnly||(a.onload=function(i){return t._onload(a,e,i)},a.ontimeout=function(i){return t._ontimeout(a,e,i)},a.onerror=function(i){return t._onerror(a,e,i)}),e.header)if(Array.isArray(e.header))for(var c=0;c<e.header.length;++c)a.setRequestHeader(e.header[c].header,e.header[c].value);else a.setRequestHeader(e.header.header,e.header.value);a.setRequestHeader("X-Client-Version","1.0.0"),a.setRequestHeader("x-platform","CLIENT"),"POST"===i||"PUT"===i?void 0===s||null===s?a.send():"object"===(void 0===s?"undefined":o(s))?(s=JSON.stringify(s),a.send(s)):"string"==typeof s&&a.send(s):a.send(),this._messageArray.splice(0,1)}},_onload:function(t,e,i){if(cc.isValid(this.node))if("json"==t.responseType||""!=t.responseText)if(t.status>=200&&t.status<300||304==t.status){var o=null;o="json"==t.responseType?t.response:t.responseText,cc.log("<------------------------\ntype="+e.type+" url="+e.url+" \n\u6d88\u606f\u5b8c\u6210\u72b6\u6001"+t.status+" \n\u6536\u5230\u6d88\u606f:"+JSON.stringify(o)+"\n---------------------\x3e"),o&&o.errcode&&0!=o.errcode?cc.log(o.errcode):e.callback&&e.callback(o,t)}else{cc.log("\u6d88\u606f\u5b8c\u6210\u72b6\u6001",t.status);if(400===t.status){o={};(o="json"==t.responseType?t.response:t.responseText).message&&o.message}e.errorCallback&&e.errorCallback()}else cc.log("--------Http responseText \u4e3a\u7a7a----"+e.url);else cc.log("_onload\uff0c\u8282\u70b9\u5df2\u65e0\u6548\uff0c\u653e\u5f03\u56de\u8c03")},_ontimeout:function(t,e,i){"function"==typeof e.errorCallback&&cc.isValid(this.node)&&e.errorCallback(t),cc.isValid(this.node)?cc.log("\u6d88\u606f\u8d85\u65f6 "+e.url):cc.log("_ontimeout\uff0c\u8282\u70b9\u5df2\u65e0\u6548\uff0c\u653e\u5f03\u56de\u8c03")},_onerror:function(t,e,i){"function"==typeof e.errorCallback&&cc.isValid(this.node)&&e.errorCallback(t),cc.isValid(this.node)||cc.log("_onerror\uff0c\u8282\u70b9\u5df2\u65e0\u6548\uff0c\u653e\u5f03\u56de\u8c03")},clearMessageArray:function(){this._messageArray=[],this.repeateRequestArray=[]}}),cc._RF.pop()},{}],keyCube:[function(t,e,i){"use strict";cc._RF.push(e,"31a00OTIOtDGZje+PrhALiz","keyCube"),cc.Class({extends:cc.Component,properties:{KeyLabel:cc.Node,bg:cc.Node,keySpriteFrame:[cc.SpriteFrame]},start:function(){},setKey:function(t){var e=this.KeyLabel.getComponent(cc.Label);e.string=t.key,this.keyValue=t.key,this.handIndex=t.handIndex,t.code?this.keyCode=t.code:this.keyCode=t.key.charCodeAt(),t.fontSize&&(e.fontSize=t.fontSize,e.lineHeight=t.fontSize+8),t.width&&(this.KeyLabel.width=this.KeyLabel.width+(t.width-1)*this.node.width,this.node.width=this.node.width*t.width,this.bg.width=this.node.width),1==t.horizontal?(e.horizontalAlign=cc.Label.HorizontalAlign.LEFT,e.verticalAlign=cc.Label.VerticalAlign.BOTTOM):3==t.horizontal&&(e.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,e.verticalAlign=cc.Label.VerticalAlign.BOTTOM),this.canClick=!1!==t.active},onSetActive:function(t){var e=t?0:2;this.bg.getComponent(cc.Sprite).spriteFrame=this.keySpriteFrame[e],this.bg.width=this.node.width},onClick:function(t){var e=this,i=t?0:1;this.bg.getComponent(cc.Sprite).spriteFrame=this.keySpriteFrame[i],this.bg.width=this.node.width,setTimeout(function(){e.bg.getComponent(cc.Sprite).spriteFrame=e.keySpriteFrame[2],e.bg.width=e.node.width},130)}}),cc._RF.pop()},{}],keyboard:[function(t,e,i){"use strict";cc._RF.push(e,"f3b80POiuJOd7p7dceaSAk1","keyboard"),cc.Class({extends:cc.Component,properties:{KeyBox:cc.Node,KeyJson:cc.JsonAsset,KeyItem:cc.Prefab,handImg:cc.Node,handFrames:[cc.SpriteFrame]},start:function(){this.backKeyCubeJS=null;for(var t=0;t<this.KeyJson.json.keys.length;t++){var e=this.KeyJson.json.keys[t],i=cc.instantiate(this.KeyItem);i.getComponent("keyCube").setKey(e),this.KeyBox.addChild(i)}},onKeyDown:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.KeyBox.children[t],n=o.getComponent("keyCube");return i&&n.onClick(e),e?o.convertToWorldSpaceAR(cc.v2(0,0)):0},onCanKeyDown:function(t){for(var e=0;e<this.KeyBox.children.length;e++){var i=this.KeyBox.children[e].getComponent("keyCube");if(i.keyCode==t.keyCode&&i.canClick)return{index:e,keyValue:i.keyValue}}return{index:-1}},setHandImg:function(t){for(var e=0;e<this.KeyBox.children.length;e++){var i=this.KeyBox.children[e].getComponent("keyCube"),o=i.keyValue.split("\n");if(o&&0!=o.length)if(o[o.length-1].toLowerCase()==t)return this.backKeyCubeJS&&this.backKeyCubeJS.onSetActive(!1),this.backKeyCubeJS=i,i.onSetActive(!0),void this.showHandImg(i.handIndex)}},showHandImg:function(t){void 0!=t&&(this.handImg.getComponent(cc.Sprite).spriteFrame=this.handFrames[t],this.handImg.setContentSize(820,470))},onHandOver:function(){this.backKeyCubeJS&&this.backKeyCubeJS.onSetActive(!1),this.handImg.getComponent(cc.Sprite).spriteFrame=null},getPointX:function(t){for(var e=" "==t?32:t.toUpperCase().charCodeAt(0),i=0;i<this.KeyBox.children.length;i++){var o=this.KeyBox.children[i];if(o.getComponent("keyCube").keyCode==e)return o.getPosition().x}return 0}}),cc._RF.pop()},{}],letterRect:[function(t,e,i){"use strict";cc._RF.push(e,"47e8dkMJphCVredHU5KrGn8","letterRect");var o=t("gameLocalData");cc.Class({extends:cc.Component,properties:{letterLabel:cc.Node,particle:cc.Node,bg:cc.Node,activeBg:cc.Node},start:function(){},onLoad:function(){this.anchorColor=new cc.color(219,25,123,255)},onInit:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(this.bg.active=!0,this.accelerate=1,this.speed=i,this.comLetterLabel=this.letterLabel.getComponent(cc.Label),this.curText=t,this.LetterCount=t.length,this.comLetterLabel.string=t,this.node.setPosition(e),t.length>1){this.comLetterLabel._updateRenderData(!0);var o=this.letterLabel.width>20?this.letterLabel.width:20;this.bg.width=o+40}-1!=this.speed&&(this.isPlay=!0),this.maxY=200-this.node.parent.height/2+this.node.height/2},setAnchor:function(t,e){this.finish_cb=t,this.lose_cb=e,this.bg.color=this.anchorColor,this.letterLabel.color=this.anchorColor,this.node.zIndex=100},onStop:function(){this.isPlay=!1},removeCode:function(t){return this.getFristLetter()==t?(this.curText.length>1?this.curText=this.curText.substring(1,this.curText.length):this.curText="",this.curText.length):-1},getFristLetter:function(){return this.curText.length>=1?this.curText[0]:null},getBullseyePosition:function(){return this.node.getPosition()},setHit:function(t){this.LetterCount&&(this.comLetterLabel.string=this.comLetterLabel.string.substring(1,this.comLetterLabel.string.length),1===this.LetterCount?(this.onPlayParticle(t),this.finish_cb&&this.finish_cb()):this.LetterCount--)},onPlayParticle:function(t){var e=this;this.isPlay=!1,this.bg.active=!1;var i=this.particle.getComponent(cc.ParticleSystem);this.onSetParticleStyle(t,i),i.resetSystem(),setTimeout(function(){cc.isValid(e.node)&&(i.stopSystem(),e.node.destroy())},1e3)},onSetParticleStyle:function(t,e){1===t?(e.lifeVar=.44,e.totalParticles=200,e.speed=40,e.speedVar=300):2===t?(e.lifeVar=.55,e.totalParticles=250,e.speed=45,e.speedVar=360):3===t?(e.lifeVar=.66,e.totalParticles=381,e.speed=70,e.speedVar=560):(e.lifeVar=.77,e.totalParticles=381,e.speed=100,e.speedVar=666)},onAccelerate:function(){this.accelerate=5},update:function(t){this.isPlay&&!o.IsPause&&(this.accelerate>1?(this.node.y-=this.speed*this.accelerate*t,this.accelerate--):this.node.y-=this.speed*t,this.node.y<=this.maxY&&this.lose_cb&&this.lose_cb())}}),cc._RF.pop()},{gameLocalData:"gameLocalData"}],levelItem:[function(t,e,i){"use strict";cc._RF.push(e,"71042GBb4RIyJ6Bsim30l93","levelItem");t("gameLocalData");cc.Class({extends:cc.Component,properties:{iconFrame:[cc.SpriteFrame],starFrame:cc.SpriteFrame,icon:cc.Node,title:cc.Node,starContent:cc.Node,play:cc.Node,shade:cc.Node,lock:cc.Node},start:function(){},onInit:function(t,e,i){this.data=e,this.sectionId=t,this.isVideo=e.isVideo,this.cb=i,this.isVideo?(this.icon.getComponent(cc.Sprite).spriteFrame=this.iconFrame[1],this.starContent.active=!1):this.icon.getComponent(cc.Sprite).spriteFrame=this.iconFrame[0],this.title.getComponent(cc.Label).string=e.name},onSetProgressData:function(t,e){var i=this,o=e.find(function(e){return e.chapterId==t&&e.sectionId==i.sectionId});o&&(this.onUnLock(),this.onLightenStar(o.score))},onUnLock:function(){this.shade.active=!1,this.lock.active=!1,this.play.active=!0},onLightenStar:function(t){t>this.starContent.children.length&&(t=this.starContent.children.length);for(var e=0;e<t;e++)this.starContent.children[e].getComponent(cc.Sprite).spriteFrame=this.starFrame},onPlay:function(){this.cb(this.isVideo)}}),cc._RF.pop()},{gameLocalData:"gameLocalData"}],main:[function(t,e,i){"use strict";cc._RF.push(e,"85ca7Rvb0hBlpP2l7f8MGOC","main");var o=t("gameLocalData");t("gameWindowFun"),cc.Class({extends:cc.Component,properties:{ScrollContent:cc.Node,GameItem:cc.Prefab,LevelJsons:[cc.JsonAsset],Audio:cc.Node,NoviceGuidePop:cc.Node,videoLayout:cc.Node,videoPlayer:cc.Node,userIDLab:cc.Node},start:function(){cc.director.preloadScene("gameScene")},onLoad:function(){var t=this;o.UserId||(o.UserId=1e5),this.userIDLab.getComponent(cc.Label).string=o.UserId,window.GamePersistRootJS().initPersistRootNode(),window.GameAudioJS().onPlayHomeBG();for(var e=0;e<this.LevelJsons.length;e++){var i=this.LevelJsons[e].json.level,n=cc.instantiate(this.GameItem);this.ScrollContent.addChild(n),n.getComponent("gameItem").onInit(e,i)}window.GameUserJS().requestGetUserList(o.UserId,function(e){e&&0!=e.length||((e=[{userId:o.UserId,chapterId:0,sectionId:0,score:0}]).forEach(function(t){window.GameUserJS().requestSetUserPorgress(function(){},t)}),t.onPlayVideo()),o.GameProgressData=e;for(var i=0;i<t.ScrollContent.children.length;i++){t.ScrollContent.children[i].getComponent("gameItem").onSetProgressData(e)}})},onPlayVideo:function(){var t=this;setTimeout(function(){t.videoLayout.active=!0,t.videoPlayer.on("meta-loaded",function(){t.videoPlayer.getComponent(cc.VideoPlayer).resume()}),t.videoPlayer.on("completed",function(){t.videoLayout.active=!1,t.NoviceGuidePop.active=!0;var e=[{showArrowIndex:1,x:455-t.node.width/2,y:t.node.height/2-222}];t.NoviceGuidePop.getComponent("noviceGuidePop").onInit(0,e)}),t.videoPlayer.getComponent(cc.VideoPlayer).remoteURL=window.VideoUrl("movie.mp4")},1e3)},randomToFloor:function(t,e){return Math.floor(Math.random()*(e-t))+t},onGoHome:function(){window.isShell&&window.parent.PublicJS().runScene("MainScene")}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],noviceGuidePop:[function(t,e,i){"use strict";cc._RF.push(e,"16cf9ZmiRBM1qDcZ2DLdbCY","noviceGuidePop");t("gameLocalData");cc.Class({extends:cc.Component,properties:{infoLab:cc.Node,textJson:cc.JsonAsset,arrowBtn:cc.Node,hintLab:cc.Node,shade:cc.Node,dialogBox:cc.Node},start:function(){},onLoad:function(){this.shade.on("mousedown",this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onKeyDown:function(){this.node.active&&this.hintLab.active&&this.onNext()},onInit:function(t,e,i,o){var n=this;this.hintLab.active=!1,this.mouseIndex=-1,this.texts=this.textJson.json.texts[t].split("#"),e||(this.arrowBtn.active=!1),this.showArrowDatas=e,this.cb=o,setTimeout(function(){n.hintLab.active=!0,n.hintLab.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.6,255),cc.fadeTo(.6,100))))},800),this.onNext(),this.dialogBox.y=i?160:-274},onNext:function(){var t=this;if(this.mouseIndex++,this.mouseIndex<this.texts.length){if(this.infoLab.getComponent(cc.Label).string=this.texts[this.mouseIndex],this.showArrowDatas&&this.showArrowDatas.length>0){var e=this.showArrowDatas.find(function(e){return e.showArrowIndex==t.mouseIndex});e?(this.arrowBtn.stopAllActions(),this.arrowBtn.active=!0,this.arrowBtn.x=e.x,this.arrowBtn.y=e.y,this.arrowBtn.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.4,e.x-10,e.y),cc.moveTo(.4,e.x,e.y))))):this.arrowBtn.active=!1}}else this.hintLab.stopAllActions(),this.arrowBtn.stopAllActions(),this.node.active=!1,this.cb&&this.cb()}}),cc._RF.pop()},{gameLocalData:"gameLocalData"}],pausePop:[function(t,e,i){"use strict";cc._RF.push(e,"0c765ph/GpI8aLKZO7x3yvq","pausePop"),cc.Class({extends:cc.Component,properties:{},start:function(){},onInit:function(t){this.cb=t},onHome:function(){this.cb(1)},onPlay:function(){this.cb(2)}}),cc._RF.pop()},{}],persisRoot:[function(t,e,i){"use strict";cc._RF.push(e,"34fd9mY81FHIIlrUJQspOTq","persisRoot");t("gameLocalData");cc.Class({extends:cc.Component,properties:{http:cc.Node,audio:cc.Node,user:cc.Node},onLoad:function(){},initPersistRootNode:function(){cc.game.addPersistRootNode(this.node),this.getHttpJS().initHttp()},getHttpJS:function(){return this.http.getComponent("httpService")},getAudioJS:function(){return this.audio.getComponent("gameAudio")},getUserJS:function(){return this.user.getComponent("userService")}}),cc._RF.pop()},{gameLocalData:"gameLocalData"}],practiceItem:[function(t,e,i){"use strict";cc._RF.push(e,"58234zX7PBJPZPzQUeCaSlk","practiceItem"),cc.Class({extends:cc.Component,properties:{WritingLab:cc.Node,particle:cc.Node},start:function(){},SetText:function(t){this.WritingLab.getComponent(cc.Label).string=t},playParticle:function(){var t=this.particle.getComponent(cc.ParticleSystem);t.particleCount>0?t.stopSystem():t.resetSystem()}}),cc._RF.pop()},{}],practiceStateJS:[function(t,e,i){"use strict";cc._RF.push(e,"bc1d2RNoz9FQ5UO7M42HI1E","practiceStateJS");var o=t("gameLocalData");t("gameWindowFun"),cc.Class({extends:cc.Component,properties:{},start:function(){},onPlayGame:function(t){var e=this;this.gameJS=t,window.GameAudioJS().onPlayExerciseBG(),this.data=t.getCurLevelData().boss.practiceState,this.speed=t.getCurLevelData().boss.practiceSpeed,this.keyboardJS=t.KeyboardJS,this.curPoolIndex=0,this.onUpdatePoolData(),this.isCreateOver=!1,this.unscheduleAllCallbacks(this),this.schedule(this.createLetterItem,1.2,cc.macro.REPEAT_FOREVER,.1),this.gameJS.onRunTimer(!0),this.gameJS.hitOKCount=0,this.gameJS.hitErrorCount=0,o.GameProgressData.find(function(t){return-1==t.chapterId&&2==t.sectionId})||(this.gameJS.onRequestSetUserPorgress(-1,2,1),setTimeout(function(){e.gameJS.onNoviceGuidePop(4)},400))},onUpdatePoolData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.curPoolIndex<this.data.length?(this.letterRectIndex=0,this.curNormalLetterPool=this.data[this.curPoolIndex].normal,this.curUpdateCount=this.data[this.curPoolIndex].updateCount,t||this.createLetterItem()):this.levelFinish=!0},onGetSumUpdateCount:function(){for(var t=0,e=0;e<this.data.length;e++){t+=this.data[e].updateCount}return t},onKeyDown:function(t,e){var i=e.getComponent("letterRect");return-1==i.removeCode(t)?null:(i.bulletSpeed=60,i)},onLose:function(){this.unscheduleAllCallbacks(this)},createLetterItem:function(){if(!o.IsPause)if(this.letterRectIndex<this.curUpdateCount){var t=this.gameJS.createLetterItem(),e=this.curNormalLetterPool[this.gameJS.randomToFloor(0,this.curNormalLetterPool.length)],i=this.keyboardJS.getPointX(e);t.getComponent("letterRect").onInit(e,cc.v2(i,368),this.speed),this.letterRectIndex++,this.gameJS.onAutoLocation(),this.letterRectIndex==this.curUpdateCount&&this.curPoolIndex==this.data.length-1&&(this.isCreateOver=!0)}else++this.curPoolIndex,this.onUpdatePoolData(!1)},onKeyError:function(){for(var t=0;t<this.gameJS.LetterBoxs.children.length;t++){this.gameJS.LetterBoxs.children[t].getComponent("letterRect").onAccelerate()}},finishOnce:function(){var t=this;this.isCreateOver&&this.gameJS.getLettersAllFinish()&&(this.unscheduleAllCallbacks(this),setTimeout(function(){window.GameAudioJS().onPlayBossAppear(),t.gameJS.onBack()},1e3))}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],smallRule:[function(t,e,i){"use strict";cc._RF.push(e,"32ea5ElvXVAI6oA0vYzyNWG","smallRule");var o=t("gameLocalData");cc.Class({extends:cc.Component,properties:{},start:function(){},onLoad:function(){this.fastSpeed=this.random(2,4),this.slowSpeed=this.random(.3,.8),this.init_y=this.node.y},onPlay:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.speed=t?this.fastSpeed:this.slowSpeed,this.isPlay=!0},onStop:function(){this.isPlay=!1},random:function(t,e){var i=Math.random()*(e-t)+t;return i},update:function(t){this.isPlay&&!o.IsPause&&(this.node.y-=this.speed,this.node.y<=-this.init_y&&(this.node.y=this.init_y))}}),cc._RF.pop()},{gameLocalData:"gameLocalData"}],userService:[function(t,e,i){"use strict";cc._RF.push(e,"6a36f8/Mq9CWZqqvwYKImkK","userService");t("gameLocalData");t("gameWindowFun"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},requestSetUserPorgress:function(t,e){window.GameHttpJS().sendPost("/einstein-logic/v1/typingGame/progress",function(e,i){e&&e.data&&t&&t()},e)},requestGetUserList:function(t,e){window.GameHttpJS().sendGet('/einstein-logic/v1/typingGame/progressByFilter?current=1&pageSize=1000&order=id&sortMode=ascend&filter={"userId": '+t+"}",function(t,i){t?e&&e(t.data):e&&e(null)})}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],video:[function(t,e,i){"use strict";cc._RF.push(e,"340307vCsNI4p+7aGuG+1k7","video");var o=t("gameLocalData");t("gameWindowFun"),cc.Class({extends:cc.Component,properties:{videoPlayer:cc.Node,btn:cc.Sprite,slider:cc.Node,sliderProgressBg:cc.Node,timeLabel:cc.Label,btnSF:[cc.SpriteFrame],nextBtn:cc.Node,quitBtn:cc.Node},start:function(){},onLoad:function(){var t=this;window.GameAudioJS().onStopMusic(),this.gotoGameData=o.GotoGameData,this.exerciseState=o.GameData.exercise.exerciseState,this.init(),this.videoPlayer.on("meta-loaded",function(){t.isLoaded=!0,t.duration=t.videoPlayer.getComponent(cc.VideoPlayer).getDuration(),cc.log("this.duration======"+t.duration+" url="+t.data.url),t.refreshVideoTime(),t.playVideo(!0)}),this.videoPlayer.on("paused",function(){t.btn.spriteFrame=t.btnSF[0]}),this.videoPlayer.on("stopped",function(){t.btn.spriteFrame=t.btnSF[0]}),this.videoPlayer.on("playing",function(){t.btn.spriteFrame=t.btnSF[1]}),this.videoPlayer.on("completed",function(){cc.log("completed"),t.onCompleted(),t.nextBtn.active=!0})},init:function(){var t=this;this.data=this.exerciseState[this.gotoGameData.sectionId],this.currentTime=0,this.timeLabel.string="00:00/00:00",this.slider.getComponent(cc.Slider).progress=0,this.sliderProgressBg.width=0,this.isLoaded=!1,this.videoPlayer.getComponent(cc.VideoPlayer).remoteURL=window.VideoUrl(this.data.url);var e=o.GameProgressData.find(function(e){return e.chapterId==t.gotoGameData.chapterId&&e.sectionId==t.gotoGameData.sectionId});e&&(this.nextBtn.active=e.score>0)},onCompleted:function(){this.onRequestSetUserPorgress(this.gotoGameData.chapterId,this.gotoGameData.sectionId,1),this.onRequestSetUserPorgress(this.gotoGameData.chapterId,this.gotoGameData.sectionId+1,0),this.gotoGameData.sectionId==this.exerciseState.length-1&&this.onRequestSetUserPorgress(this.gotoGameData.chapterId+1,0,0)},onRequestSetUserPorgress:function(t,e,i){var n={userId:o.UserId,chapterId:t,sectionId:e,score:i};window.GameUserJS().requestSetUserPorgress(function(){},n)},refreshVideoTime:function(){if(this.duration){this.currentTime=this.videoPlayer.getComponent(cc.VideoPlayer).currentTime,this.refreshTimeLabel();var t=this.currentTime/this.duration;t=Math.min(t,1),this.slider.getComponent(cc.Slider).progress=t,this.sliderProgressBg.width=t*this.slider.width}},refreshTimeLabel:function(){var t=Math.min(this.currentTime,this.duration);this.timeLabel.string=this.secondToTime(t)+"/"+this.secondToTime(this.duration)},secondToTime:function(t){t=Math.ceil(t);var e=Math.floor(t/60);e<10&&(e="0"+e);var i=t%60;return i<10&&(i="0"+i),e+":"+i},secondToTimesecondToTime:function(t){t=Math.ceil(t);var e=Math.floor(t/60);e<10&&(e="0"+e);var i=t%60;return i<10&&(i="0"+i),e+":"+i},playVideo:function(t){t?(this.videoPlayer.getComponent(cc.VideoPlayer).resume(),this.btn.spriteFrame=this.btnSF[1]):(this.videoPlayer.getComponent(cc.VideoPlayer).pause(),this.btn.spriteFrame=this.btnSF[0])},videoPlayCallback:function(){if(this.videoPlayer.getComponent(cc.VideoPlayer).isPlaying())this.playVideo(!1);else{this.isCreate;this.playVideo(!0)}},sliderEvent:function(){if(this.isLoaded){var t=this.slider.getComponent(cc.Slider).progress;this.videoPlayer.getComponent(cc.VideoPlayer)._impl._video.currentTime=this.currentTime=this.duration*t,this.refreshTimeLabel(),this.sliderProgressBg.width=t*this.slider.width}else this.slider.getComponent(cc.Slider).progress=0},onNext:function(){(o.GotoGameData.sectionId+=1,console.log(o.GotoGameData.sectionId),console.log(this.gotoGameData.sectionId),this.gotoGameData.sectionId<=this.exerciseState.length-1)?this.exerciseState[this.gotoGameData.sectionId].isVideo?this.init():(o.GotoGameData.isBossLevel=!1,cc.director.loadScene("gameScene")):(o.GotoGameData.isBossLevel=!0,cc.director.loadScene("gameScene"))},onQuit:function(){this.videoPlayer.getComponent(cc.VideoPlayer).stop(),cc.director.loadScene("mainScene")},update:function(){this.videoPlayer.getComponent(cc.VideoPlayer).isPlaying()&&this.refreshVideoTime()}}),cc._RF.pop()},{gameLocalData:"gameLocalData",gameWindowFun:"gameWindowFun"}],weaknessLetterRect:[function(t,e,i){"use strict";cc._RF.push(e,"ccdd8AufuNDQocIMKbMfyCo","weaknessLetterRect"),cc.Class({extends:cc.Component,properties:{letterLabel:cc.Node,bg:cc.Node,activeBg:cc.Node},start:function(){},onLoad:function(){this.anchorColor=new cc.color(255,255,255,255)},onInit:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.finish_cb=e,this.node.setPosition(t)},onSetText:function(t){this.comLetterLabel=this.letterLabel.getComponent(cc.Label),this.curText=t,this.LetterCount=t.length,this.comLetterLabel.string=t,t.length>1&&(this.comLetterLabel._updateRenderData(!0),this.bg.width=this.letterLabel.width+30)},onSetHigh:function(){this.node.isHigh=!0,this.node.stopAllActions(),this.activeBg.active=!0,this.letterLabel.color=this.anchorColor},onFlicker:function(){this.letterLabel.color=new cc.color(219,25,123,255),this.bg.runAction(cc.repeatForever(cc.sequence(cc.tintTo(.2,219,25,123),cc.tintTo(.2,61,96,211))))},removeCode:function(t){return this.getFristLetter()==t?(this.curText.length>1?this.curText=this.curText.substring(1,this.curText.length):(this.curText="",this.finish_cb&&this.finish_cb()),this.curText.length):-1},getFristLetter:function(){return this.curText.length>=1?this.curText[0]:null},getBullseyePosition:function(){return this.node.getPosition()}}),cc._RF.pop()},{}],winPop:[function(t,e,i){"use strict";cc._RF.push(e,"dddfbvmexlEG46hAFDk9TMq","winPop"),cc.Class({extends:cc.Component,properties:{starFrames:[cc.SpriteFrame],tickrFrames:[cc.SpriteFrame],starContent:cc.Node,tickContent:cc.Node,twoStarAccuracy:cc.Node,threeStarAccuracy:cc.Node,threeStarTime:cc.Node,diademaFrames:[cc.SpriteFrame],smallStarFrames:[cc.SpriteFrame],starEmpty:cc.Node,smallStarContent:cc.Node,btns:cc.Node},start:function(){},onInit:function(t,e,i,o,n,s){var a=this;console.log("data",o),console.log("isThreeAccuracy",e),console.log("isThreeHitTimeOffset",i),console.log("starNum",t);for(var c=0;c<3;c++){var r=this.starEmpty.children[c],h=this.starContent.children[c],l=this.smallStarContent.children[c],u=this.btns.children[c];n?(r.getComponent(cc.Sprite).spriteFrame=this.diademaFrames[0],r.setContentSize(137,108),h.getComponent(cc.Sprite).spriteFrame=this.diademaFrames[1],h.setContentSize(137,108),l.getComponent(cc.Sprite).spriteFrame=this.smallStarFrames[1],l.setContentSize(50,39),0==c?u.x=-80:1==c?u.x=80:u.active=!1):(r.getComponent(cc.Sprite).spriteFrame=this.starFrames[0],r.setContentSize(138,139),h.getComponent(cc.Sprite).spriteFrame=this.starFrames[1],h.setContentSize(138,139),l.getComponent(cc.Sprite).spriteFrame=this.smallStarFrames[0],l.setContentSize(50,50),0==c?u.x=-170:1==c?u.x=0:u.active=!0)}if(this.twoStarAccuracy.getComponent(cc.Label).string=100*o.twoStars+"%",this.threeStarAccuracy.getComponent(cc.Label).string=100*o.threeStars.accuracy+"%",this.threeStarTime.getComponent(cc.Label).string=o.threeStars.time+"s",this.cb=s,this.anim=this.node.getComponent(cc.Animation),this.anim.play(),!(t>this.starContent.children.length)){for(var d=function(t){var e=a.starContent.children[t];setTimeout(function(){e.runAction(cc.fadeTo(.25,255))},250*t+500)},m=0;m<t;m++)d(m);if(t<=1)for(var p=0;p<this.tickContent.children.length;p++){this.tickContent.children[p].getComponent(cc.Sprite).spriteFrame=p<t?this.tickrFrames[1]:this.tickrFrames[0]}else if(2==t)for(var g=0;g<this.tickContent.children.length;g++){var f=this.tickContent.children[g];g<2?f.getComponent(cc.Sprite).spriteFrame=this.tickrFrames[1]:2==g?f.getComponent(cc.Sprite).spriteFrame=e?this.tickrFrames[1]:this.tickrFrames[0]:3==g&&(f.getComponent(cc.Sprite).spriteFrame=i?this.tickrFrames[1]:this.tickrFrames[0])}else for(var S=0;S<this.tickContent.children.length;S++){this.tickContent.children[S].getComponent(cc.Sprite).spriteFrame=this.tickrFrames[1]}setTimeout(function(){a.anim.play("winEnd")},300*t+500)}},onHome:function(){this.cb(1)},onAgain:function(){this.cb(2)},onNext:function(){this.cb(3)}}),cc._RF.pop()},{}]},{},["attackStateJS","beatingStateJS","blood","airplaneBoss","catBoss","crabBoss","bullet","exerciseStateJS","game","failurePop","gameItem","levelItem","noviceGuidePop","pausePop","winPop","keyCube","keyboard","letterRect","main","practiceItem","practiceStateJS","buttonSetting","gameAudio","gameLocalData","gameWindowFun","httpService","persisRoot","userService","smallRule","video","weaknessLetterRect"]);